
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Full documentation for the Week06 project hosted on Deepwiki">
      
      
        <meta name="author" content="Lourdes12587">
      
      
      
        <link rel="prev" href="../Role-Based-Access-Control/">
      
      
        <link rel="next" href="../Authentication-Endpoints/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Session Management - Week06 Project Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#session-management" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href=".." title="Week06 Project Documentation" class="md-header__button md-logo" aria-label="Week06 Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Week06 Project Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Session Management
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://deepwiki.com/Lourdes12587/Week06/1-overview9" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Deepwiki
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Overview/" class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Getting-Started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Project-Structure/" class="md-tabs__link">
          
  
  
  Project Structure

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Technology-Stack/" class="md-tabs__link">
          
  
  
  Architecture Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Authentication-%26-Authorization/" class="md-tabs__link">
          
  
  
  Authentication & Authorization

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Course-Management-System/" class="md-tabs__link">
          
  
  
  Course Management System

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../User-Profiles/" class="md-tabs__link">
          
  
  
  User Profiles

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Frontend-Architecture/" class="md-tabs__link">
          
  
  
  Frontend Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../API-Reference/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
  Appendix

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Week06 Project Documentation" class="md-nav__button md-logo" aria-label="Week06 Project Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Week06 Project Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://deepwiki.com/Lourdes12587/Week06/1-overview9" title="Ir al repositorio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Deepwiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Getting-Started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Project Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Project-Structure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Adding-New-Routes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding New Routes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Architecture Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Technology-Stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technology Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Application-Entry-Point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Application Entry Point
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Database-Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Database-Operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Routing-System/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Routing System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Security-Considerations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Considerations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Authentication & Authorization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Authentication & Authorization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Authentication-%26-Authorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../User-Registration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Registration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../User-Login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Login
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Role-Based-Access-Control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role-Based Access Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Session Management
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Session Management
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose-and-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose and Scope
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Session Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Session Lifecycle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-creation-during-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Session Creation During Authentication
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Creation During Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication-process" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-data-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Session Data Storage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-access-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Session Access Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Access Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-session-reading" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Session Reading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-based-conditionals" class="md-nav__link">
    <span class="md-ellipsis">
      Session-Based Conditionals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-persistence-across-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Session Persistence Across Requests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Persistence Across Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session-store" class="md-nav__link">
    <span class="md-ellipsis">
      Session Store
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-destruction" class="md-nav__link">
    <span class="md-ellipsis">
      Session Destruction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Destruction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logout-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Logout Implementation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-data-structure-reference" class="md-nav__link">
    <span class="md-ellipsis">
      Session Data Structure Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Session Security Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Security Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#session-secret-management" class="md-nav__link">
    <span class="md-ellipsis">
      Session Secret Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cookie-security" class="md-nav__link">
    <span class="md-ellipsis">
      Cookie Security
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#session-fixation-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Session Fixation Prevention
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-middleware" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Middleware
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Authentication-Endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Endpoints
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Course Management System
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Course Management System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Management-System/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Creating-Courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Courses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Editing-%26-Deleting-Courses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Editing & Deleting Courses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Listing-%26-Visibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Listing & Visibility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Enrollment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Enrollment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Views/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Views
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Management-Endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Management Endpoints
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Profiles
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            User Profiles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../User-Profiles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../User-Profile-Page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Profile Page
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Administrator-Dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administrator Dashboard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Frontend Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Frontend Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Frontend-Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Template-System-%26-Partials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Template System & Partials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Landing-Page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Landing Page
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Styling-System/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Styling System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Development-Guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../API-Reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Authentication-Endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Endpoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Course-Management-Endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Course Management Endpoints
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Appendix
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    README
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="session-management">Session Management<a class="headerlink" href="#session-management" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Relevant source files</strong>
* <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js">app.js</a>
* <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js">routes/auth.js</a>
* <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js">routes/index.js</a></p>
</blockquote>
<h2 id="purpose-and-scope">Purpose and Scope<a class="headerlink" href="#purpose-and-scope" title="Permanent link">&para;</a></h2>
<p>This document details the session management implementation in the course management system, explaining how user state is maintained across HTTP requests using the <code>express-session</code> middleware. This includes session configuration, storage, creation during authentication, access patterns in route handlers, and session destruction on logout.</p>
<p>For information about the authentication process that creates sessions, see <a href="/Lourdes12587/Week06/4.2-user-login">User Login</a>. For details on role-based access control using session data, see <a href="/Lourdes12587/Week06/4.3-role-based-access-control">Role-Based Access Control</a>.</p>
<hr />
<h2 id="session-configuration">Session Configuration<a class="headerlink" href="#session-configuration" title="Permanent link">&para;</a></h2>
<p>The application configures session management in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L4-L13">app.js L4-L13</a></p>
<p>using the <code>express-session</code> middleware. This configuration establishes the foundation for maintaining user state throughout the application.</p>
<div class="highlight"><pre><span></span><code>Key Configuration Parameters:
</code></pre></div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>secret</code></td>
<td><code>"secret"</code></td>
<td>Cryptographic key used to sign the session ID cookie</td>
</tr>
<tr>
<td><code>resave</code></td>
<td><code>false</code></td>
<td>Prevents session resaving if unmodified</td>
</tr>
<tr>
<td><code>saveUninitialized</code></td>
<td><code>false</code></td>
<td>Prevents storing empty sessions</td>
</tr>
</tbody>
</table>
<p>The <code>secret</code> parameter in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L8-L8">app.js L8</a></p>
<p>is used to sign the session ID cookie, preventing tampering. In production environments, this should be loaded from environment variables rather than hardcoded. The <code>resave: false</code> configuration in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L9-L9">app.js L9</a></p>
<p>prevents unnecessary writes to the session store when session data hasn't changed, improving performance. The <code>saveUninitialized: false</code> setting in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L10-L10">app.js L10</a></p>
<p>ensures that sessions are only created when data is actually stored, reducing storage overhead and complying with privacy regulations.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L4-L13">app.js L4-L13</a></p>
<hr />
<h2 id="session-lifecycle">Session Lifecycle<a class="headerlink" href="#session-lifecycle" title="Permanent link">&para;</a></h2>
<p>The following diagram illustrates the complete lifecycle of a session from creation through destruction:</p>
<p><strong>Session Lifecycle Flow</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; NoSession : "User visits application"
    NoSession --&gt; SessionCreated : "POST /auth (successful login)"
    SessionCreated --&gt; SessionActive : "Session data stored"
    SessionActive --&gt; SessionAccessed : "Session data read/modified"
    SessionAccessed --&gt; SessionActive : "Session data read/modified"
    SessionActive --&gt; SessionDestroyed : "POST /logout"
    SessionDestroyed --&gt; [*] : "Session cleared"</code></pre>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L75-L136">routes/auth.js L75-L136</a></p>
<p><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L6-L14">routes/index.js L6-L14</a></p>
<hr />
<h2 id="session-creation-during-authentication">Session Creation During Authentication<a class="headerlink" href="#session-creation-during-authentication" title="Permanent link">&para;</a></h2>
<p>Sessions are created when a user successfully authenticates through the <code>/auth</code> endpoint. The authentication handler in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L75-L131">routes/auth.js L75-L131</a></p>
<p>performs credential validation and establishes the session.</p>
<h3 id="authentication-process">Authentication Process<a class="headerlink" href="#authentication-process" title="Permanent link">&para;</a></h3>
<p>When a user submits login credentials via <code>POST /auth</code>, the following sequence occurs:</p>
<ol>
<li><strong>Credential Extraction:</strong> Email and password are extracted from <code>req.body</code> in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L77-L78">routes/auth.js L77-L78</a></li>
<li><strong>Database Lookup:</strong> User record is queried from the <code>usuarios</code> table in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L81-L84">routes/auth.js L81-L84</a></li>
<li><strong>Password Verification:</strong> The submitted password is compared against the stored hash using <code>bcrypt.compare()</code> in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L86-L86">routes/auth.js L86</a></li>
<li><strong>Session Initialization:</strong> Upon successful authentication, session properties are set in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L102-L104">routes/auth.js L102-L104</a></li>
</ol>
<h3 id="session-data-storage">Session Data Storage<a class="headerlink" href="#session-data-storage" title="Permanent link">&para;</a></h3>
<p>The session object stores three critical pieces of information:</p>
<div class="highlight"><pre><span></span><code>Session Data Structure:
</code></pre></div>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Set At</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>req.session.loggedin</code></td>
<td><code>boolean</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L102-L102">routes/auth.js L102</a></td>
<td>Indicates active authentication status</td>
</tr>
<tr>
<td><code>req.session.usuario</code></td>
<td><code>object</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td>Complete user record from database</td>
</tr>
<tr>
<td><code>req.session.rol</code></td>
<td><code>string</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L104-L104">routes/auth.js L104</a></td>
<td>User role ('registrado' or 'admin')</td>
</tr>
</tbody>
</table>
<p>The <code>usuario</code> object stored in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></p>
<p>contains all fields from the <code>usuarios</code> table including <code>id</code>, <code>nombre</code>, <code>email</code>, <code>password</code> (hashed), and <code>rol</code>. This allows routes to access user information without additional database queries.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L75-L116">routes/auth.js L75-L116</a></p>
<hr />
<h2 id="session-access-patterns">Session Access Patterns<a class="headerlink" href="#session-access-patterns" title="Permanent link">&para;</a></h2>
<p>Once a session is established, route handlers access session data through the <code>req.session</code> object. This section documents common access patterns throughout the application.</p>
<h3 id="basic-session-reading">Basic Session Reading<a class="headerlink" href="#basic-session-reading" title="Permanent link">&para;</a></h3>
<p>The index route demonstrates simple session access in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L6-L14">routes/index.js L6-L14</a></p>
<p>:</p>
<p><strong>Session Access Flow in Index Route</strong></p>
<pre class="mermaid"><code>flowchart TD

A["GET / Request"]
B["Read req.session.usuario"]
C["usuario exists?"]
D["Extract usuario.nombre"]
E["Set name = 'Invitado'"]
F["Read req.session.loggedin"]
G["Render index.ejs with data"]

A --&gt; B
B --&gt; C
C --&gt; D
C --&gt; E
D --&gt; F
E --&gt; F
F --&gt; G</code></pre>
<p>The pattern shown in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L7-L7">routes/index.js L7</a></p>
<p>demonstrates safe session access using the optional chaining equivalent: <code>const usuario = req.session.usuario;</code>. The ternary operator in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L13-L13">routes/index.js L13</a></p>
<p>provides a fallback value when no session exists: <code>name: usuario ? usuario.nombre : "Invitado"</code>.</p>
<h3 id="session-based-conditionals">Session-Based Conditionals<a class="headerlink" href="#session-based-conditionals" title="Permanent link">&para;</a></h3>
<p>Routes use session data to determine application behavior. The login status check in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L12-L12">routes/index.js L12</a></p>
<p>uses the pattern <code>req.session.loggedin || false</code> to provide a default value when the session property is undefined.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L6-L14">routes/index.js L6-L14</a></p>
<hr />
<h2 id="session-persistence-across-requests">Session Persistence Across Requests<a class="headerlink" href="#session-persistence-across-requests" title="Permanent link">&para;</a></h2>
<p>The session middleware automatically handles cookie management and session persistence. Each HTTP request includes the session ID cookie, which the middleware uses to retrieve stored session data.</p>
<p><strong>Session Request Flow</strong></p>
<pre class="mermaid"><code>sequenceDiagram
  participant Browser
  participant express-session middleware
  participant Session Store (memory)
  participant Route Handler

  Browser-&gt;&gt;express-session middleware: "HTTP Request with session cookie"
  express-session middleware-&gt;&gt;Session Store (memory): "Lookup session by ID"
  Session Store (memory)-&gt;&gt;express-session middleware: "Return session data"
  express-session middleware-&gt;&gt;Route Handler: "Populate req.session"
  Route Handler-&gt;&gt;Route Handler: "Access req.session.usuario"
  Route Handler-&gt;&gt;Route Handler: "Access req.session.loggedin"
  Route Handler-&gt;&gt;Route Handler: "Access req.session.rol"
  Route Handler-&gt;&gt;Browser: "HTTP Response"
  Browser-&gt;&gt;Browser: "Store session cookie"
  note over express-session middleware,Session Store (memory): "Session configured in app.js:6-13"
  note over Route Handler: "Session accessed in routes/index.js:7-13"</code></pre>
<p>The middleware configured in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L6-L13">app.js L6-L13</a></p>
<p>intercepts every incoming request before it reaches route handlers. The session ID is extracted from the cookie, the corresponding session data is retrieved from the store, and the data is attached to <code>req.session</code>.</p>
<h3 id="session-store">Session Store<a class="headerlink" href="#session-store" title="Permanent link">&para;</a></h3>
<p>By default, <code>express-session</code> uses <code>MemoryStore</code>, which stores session data in application memory. This configuration is suitable for development but has limitations:</p>
<ul>
<li>Session data is lost when the server restarts</li>
<li>Does not scale across multiple server instances</li>
<li>Memory consumption grows with active sessions</li>
</ul>
<p>For production deployments, a persistent session store (e.g., Redis, MongoDB) should be configured.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L4-L13">app.js L4-L13</a></p>
<hr />
<h2 id="session-destruction">Session Destruction<a class="headerlink" href="#session-destruction" title="Permanent link">&para;</a></h2>
<p>Sessions are destroyed when users log out via the <code>POST /logout</code> endpoint defined in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L134-L136">routes/auth.js L134-L136</a></p>
<h3 id="logout-implementation">Logout Implementation<a class="headerlink" href="#logout-implementation" title="Permanent link">&para;</a></h3>
<p>The logout handler uses a single method call to completely destroy the session:</p>
<div class="highlight"><pre><span></span><code><span class="nt">Method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">req.session.destroy(callback)</span>
</code></pre></div>
<p>The implementation in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L135-L135">routes/auth.js L135</a></p>
<p>calls <code>req.session.destroy()</code> with a callback that redirects the user to the home page: <code>req.session.destroy(() =&gt; res.redirect('/'))</code>.</p>
<p><strong>Logout Flow</strong></p>
<pre class="mermaid"><code>flowchart TD

A["POST /logout Request"]
B["req.session.destroy()"]
C["Remove session from store"]
D["Clear session cookie"]
E["Execute callback"]
F["res.redirect('/')"]
G["User redirected to home"]

A --&gt; B
B --&gt; C
C --&gt; D
D --&gt; E
E --&gt; F
F --&gt; G</code></pre>
<p>After <code>req.session.destroy()</code> executes:</p>
<ul>
<li>All session data is removed from the session store</li>
<li>The session cookie is invalidated</li>
<li>Subsequent requests will have an empty <code>req.session</code> object</li>
<li>The user must authenticate again to create a new session</li>
</ul>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L134-L136">routes/auth.js L134-L136</a></p>
<hr />
<h2 id="session-data-structure-reference">Session Data Structure Reference<a class="headerlink" href="#session-data-structure-reference" title="Permanent link">&para;</a></h2>
<p>The following table provides a comprehensive reference of all session properties used throughout the application:</p>
<table>
<thead>
<tr>
<th>Property Path</th>
<th>Data Type</th>
<th>Possible Values</th>
<th>Set By</th>
<th>Used By</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>req.session.loggedin</code></td>
<td><code>boolean</code></td>
<td><code>true</code>, <code>undefined</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L102-L102">routes/auth.js L102</a></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L12-L12">routes/index.js L12</a></td>
</tr>
<tr>
<td><code>req.session.usuario</code></td>
<td><code>object</code></td>
<td>User record, <code>undefined</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L7-L13">routes/index.js L7-L13</a></td>
</tr>
<tr>
<td><code>req.session.usuario.id</code></td>
<td><code>number</code></td>
<td>User ID</td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td>Role middleware</td>
</tr>
<tr>
<td><code>req.session.usuario.nombre</code></td>
<td><code>string</code></td>
<td>User's name</td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L13-L13">routes/index.js L13</a></td>
</tr>
<tr>
<td><code>req.session.usuario.email</code></td>
<td><code>string</code></td>
<td>User's email</td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td>Various routes</td>
</tr>
<tr>
<td><code>req.session.usuario.rol</code></td>
<td><code>string</code></td>
<td><code>'registrado'</code>, <code>'admin'</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L103-L103">routes/auth.js L103</a></td>
<td>Role middleware</td>
</tr>
<tr>
<td><code>req.session.rol</code></td>
<td><code>string</code></td>
<td><code>'registrado'</code>, <code>'admin'</code>, <code>undefined</code></td>
<td><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L104-L104">routes/auth.js L104</a></td>
<td>Role middleware</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> The <code>req.session.usuario.rol</code> and <code>req.session.rol</code> properties are redundant, as both store the same role value. The latter is set explicitly in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L104-L104">routes/auth.js L104</a></p>
<p>for convenience.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L100-L104">routes/auth.js L100-L104</a></p>
<p><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/index.js#L7-L13">routes/index.js L7-L13</a></p>
<hr />
<h2 id="session-security-considerations">Session Security Considerations<a class="headerlink" href="#session-security-considerations" title="Permanent link">&para;</a></h2>
<h3 id="session-secret-management">Session Secret Management<a class="headerlink" href="#session-secret-management" title="Permanent link">&para;</a></h3>
<p>The session secret in <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L8-L8">app.js L8</a></p>
<p>is currently hardcoded as <code>"secret"</code>. In production environments, this should be:</p>
<ul>
<li>Generated using a cryptographically secure random number generator</li>
<li>Stored in environment variables via the <code>.env</code> file</li>
<li>Rotated periodically for enhanced security</li>
</ul>
<h3 id="cookie-security">Cookie Security<a class="headerlink" href="#cookie-security" title="Permanent link">&para;</a></h3>
<p>The current session configuration does not specify cookie security options. Production deployments should configure:</p>
<ul>
<li><code>cookie.secure: true</code> - Ensures cookies are only sent over HTTPS</li>
<li><code>cookie.httpOnly: true</code> - Prevents client-side JavaScript access to cookies</li>
<li><code>cookie.maxAge</code> - Sets cookie expiration time</li>
<li><code>cookie.sameSite: 'strict'</code> - Protects against CSRF attacks</li>
</ul>
<h3 id="session-fixation-prevention">Session Fixation Prevention<a class="headerlink" href="#session-fixation-prevention" title="Permanent link">&para;</a></h3>
<p>The application does not regenerate session IDs after login. To prevent session fixation attacks, consider implementing <code>req.session.regenerate()</code> after successful authentication.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L6-L13">app.js L6-L13</a></p>
<hr />
<h2 id="integration-with-middleware">Integration with Middleware<a class="headerlink" href="#integration-with-middleware" title="Permanent link">&para;</a></h2>
<p>Session data is consumed by authentication and authorization middleware throughout the application. These middleware functions check session properties to enforce access control.</p>
<p><strong>Middleware Session Dependencies</strong></p>
<pre class="mermaid"><code>flowchart TD

A["express-session middleware"]
B["req.session populated"]
C["estaAutenticado middleware"]
D["isRegistrado middleware"]
E["isAdmin middleware"]
F["req.session.loggedin === true?"]
G["Allow access"]
H["Redirect to /login"]
I["req.session.rol === 'registrado'?"]
J["Allow access"]
K["Return 403 Forbidden"]
L["req.session.rol === 'admin'?"]
M["Allow access"]
N["Return 403 Forbidden"]

A --&gt; B
B --&gt; C
B --&gt; D
B --&gt; E
C --&gt; F
F --&gt; G
F --&gt; H
D --&gt; I
I --&gt; J
I --&gt; K
E --&gt; L
L --&gt; M
L --&gt; N</code></pre>
<p>For detailed information on how these middleware functions use session data for access control, see <a href="/Lourdes12587/Week06/4.3-role-based-access-control">Role-Based Access Control</a>.</p>
<p><strong>Sources:</strong> <a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/app.js#L4-L13">app.js L4-L13</a></p>
<p><a href="https://github.com/Lourdes12587/Week06/blob/ce0c3bcd/routes/auth.js#L102-L104">routes/auth.js L102-L104</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.tabs", "toc.integrate", "content.code.copy", "content.action.edit"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
      
        <script src="../javascripts/mermaid-init.js"></script>
      
    
  </body>
</html>